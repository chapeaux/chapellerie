import e from"../../pfelement/dist/pfelement.min.js";import"../../pfe-accordion/dist/pfe-accordion.min.js";Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),i=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var o=arguments[1],r=0;r<i;){var a=t[r];if(e.call(o,a,r,t))return r;r++}return-1}}),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});
/*!
 * PatternFly Elements: PfeJumpLinks 1.12.3
 * @license
 * Copyright 2021 Red Hat, Inc.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
*/
class t extends e{static get version(){return"1.12.3"}get html(){return`\n<style>slot[name=heading][sr-only]{position:absolute;overflow:hidden;clip:rect(0,0,0,0);height:1px;width:1px;margin:-1px;padding:0;border:0}:host{-webkit-box-sizing:border-box;box-sizing:border-box;font-family:"Red Hat Text",RedHatText,Overpass,Overpass,Arial,sans-serif;font-family:var(--pfe-theme--font-family, "Red Hat Text", "RedHatText", "Overpass", Overpass, Arial, sans-serif);font-weight:400;font-weight:var(--pfe-theme--font-weight--normal,400);display:block;position:-webkit-sticky;position:sticky;z-index:80;z-index:var(--pfe-theme--zindex--jumplinks,80);top:0;padding:0}@media (min-width:992px){:host([horizontal][color=darkest]){background-color:#151515;background-color:var(--pfe-theme--color--surface--darkest,#151515);--context:var(--pfe-theme--color--surface--darkest--context, dark);--pfe-broadcasted--text:var(--pfe-theme--color--text--on-dark, #fff);--pfe-broadcasted--text--muted:var(--pfe-theme--color--text--muted--on-dark, #d2d2d2);--pfe-broadcasted--link:var(--pfe-theme--color--link--on-dark, #73bcf7);--pfe-broadcasted--link--hover:var(--pfe-theme--color--link--hover--on-dark, #bee1f4);--pfe-broadcasted--link--focus:var(--pfe-theme--color--link--focus--on-dark, #bee1f4);--pfe-broadcasted--link--visited:var(--pfe-theme--color--link--visited--on-dark, #bee1f4);--pfe-broadcasted--link-decoration:var(--pfe-theme--link-decoration--on-dark, none);--pfe-broadcasted--link-decoration--hover:var(--pfe-theme--link-decoration--hover--on-dark, underline);--pfe-broadcasted--link-decoration--focus:var(--pfe-theme--link-decoration--focus--on-dark, underline);--pfe-broadcasted--link-decoration--visited:var(--pfe-theme--link-decoration--visited--on-dark, none)}}@media (min-width:992px){:host([horizontal][color=darker]){background-color:#3c3f42;background-color:var(--pfe-theme--color--surface--darker,#3c3f42);--context:var(--pfe-theme--color--surface--darker--context, dark);--pfe-broadcasted--text:var(--pfe-theme--color--text--on-dark, #fff);--pfe-broadcasted--text--muted:var(--pfe-theme--color--text--muted--on-dark, #d2d2d2);--pfe-broadcasted--link:var(--pfe-theme--color--link--on-dark, #73bcf7);--pfe-broadcasted--link--hover:var(--pfe-theme--color--link--hover--on-dark, #bee1f4);--pfe-broadcasted--link--focus:var(--pfe-theme--color--link--focus--on-dark, #bee1f4);--pfe-broadcasted--link--visited:var(--pfe-theme--color--link--visited--on-dark, #bee1f4);--pfe-broadcasted--link-decoration:var(--pfe-theme--link-decoration--on-dark, none);--pfe-broadcasted--link-decoration--hover:var(--pfe-theme--link-decoration--hover--on-dark, underline);--pfe-broadcasted--link-decoration--focus:var(--pfe-theme--link-decoration--focus--on-dark, underline);--pfe-broadcasted--link-decoration--visited:var(--pfe-theme--link-decoration--visited--on-dark, none)}}@media (min-width:992px){:host([horizontal][color=lightest]){background-color:#fff;background-color:var(--pfe-theme--color--surface--lightest,#fff);--context:var(--pfe-theme--color--surface--lightest--context, light);--pfe-broadcasted--text:var(--pfe-theme--color--text, #151515);--pfe-broadcasted--text--muted:var(--pfe-theme--color--text--muted, #6a6e73);--pfe-broadcasted--link:var(--pfe-theme--color--link, #06c);--pfe-broadcasted--link--hover:var(--pfe-theme--color--link--hover, #004080);--pfe-broadcasted--link--focus:var(--pfe-theme--color--link--focus, #004080);--pfe-broadcasted--link--visited:var(--pfe-theme--color--link--visited, #6753ac);--pfe-broadcasted--link-decoration:var(--pfe-theme--link-decoration, none);--pfe-broadcasted--link-decoration--hover:var(--pfe-theme--link-decoration--hover, underline);--pfe-broadcasted--link-decoration--focus:var(--pfe-theme--link-decoration--focus, underline);--pfe-broadcasted--link-decoration--visited:var(--pfe-theme--link-decoration--visited, none)}}@media (min-width:992px){:host([horizontal][color=lighter]){background-color:#f0f0f0;background-color:var(--pfe-theme--color--surface--lighter,#f0f0f0);--context:var(--pfe-theme--color--surface--lighter--context, light);--pfe-broadcasted--text:var(--pfe-theme--color--text, #151515);--pfe-broadcasted--text--muted:var(--pfe-theme--color--text--muted, #6a6e73);--pfe-broadcasted--link:var(--pfe-theme--color--link, #06c);--pfe-broadcasted--link--hover:var(--pfe-theme--color--link--hover, #004080);--pfe-broadcasted--link--focus:var(--pfe-theme--color--link--focus, #004080);--pfe-broadcasted--link--visited:var(--pfe-theme--color--link--visited, #6753ac);--pfe-broadcasted--link-decoration:var(--pfe-theme--link-decoration, none);--pfe-broadcasted--link-decoration--hover:var(--pfe-theme--link-decoration--hover, underline);--pfe-broadcasted--link-decoration--focus:var(--pfe-theme--link-decoration--focus, underline);--pfe-broadcasted--link-decoration--visited:var(--pfe-theme--link-decoration--visited, none)}}:host([stuck][horizontal]){-webkit-box-shadow:0 .0625rem .125rem 0 rgba(3,3,3,.12),0 0 .125rem 0 rgba(3,3,3,.06) 0 .0625rem .125rem 0 rgba(3,3,3,.2);box-shadow:0 .0625rem .125rem 0 rgba(3,3,3,.12),0 0 .125rem 0 rgba(3,3,3,.06) 0 .0625rem .125rem 0 rgba(3,3,3,.2);-webkit-box-shadow:var(--pfe-theme--box-shadow--sm,0 .0625rem .125rem 0 rgba(3,3,3,.12),0 0 .125rem 0 rgba(3,3,3,.06)0 .0625rem .125rem 0 rgba(3,3,3,.2));box-shadow:var(--pfe-theme--box-shadow--sm,0 .0625rem .125rem 0 rgba(3,3,3,.12),0 0 .125rem 0 rgba(3,3,3,.06)0 .0625rem .125rem 0 rgba(3,3,3,.2))}.pfe-jump-links-nav__heading{margin-top:0;margin-bottom:.5rem;margin-bottom:var(--pfe-theme--content-spacer--body--sm,.5rem)}.pfe-jump-links-nav__heading h3,::slotted([slot=heading]){color:#3c3f42;color:var(--pfe-broadcasted--text,#3c3f42);margin:0;font-size:.875rem;font-size:var(--pfe-jump-links__heading--FontSize,var(--pf-global--FontSize--sm,.875rem));font-weight:400;font-weight:var(--pfe-theme--font-weight--normal,400);text-transform:uppercase;text-transform:var(--pfe-jump-links__heading--TextTransform,uppercase)}slot[name=logo]{display:none}slot[name=cta]{display:none}nav{visibility:visible;margin:0;list-style:none;padding:0}pfe-accordion-panel nav{width:100%}@media (min-width:992px){:host([horizontal][no-header]) nav{padding-top:1px;padding-bottom:0}}#container{padding:32px 0}pfe-accordion-panel #container{padding:24px 0}ul{padding:0;margin:0;border-left:1px solid #d2d2d2;border-left:var(--pfe-theme--surface--border-width,1px) var(--pfe-theme--surface--border-style,solid) var(--pfe-theme--color--ui-disabled,#d2d2d2)}li{display:block;position:relative;margin-left:calc(1px * -1);margin-left:calc(var(--pfe-theme--surface--border-width,1px) * -1)}.sub-nav li{margin-left:0}li[expand] ul{height:auto;-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}li[expand] .sub-nav{display:table;height:auto}li::before{position:absolute;content:"";top:0;left:0;background-color:transparent;width:calc(4px - 0px);width:calc(var(--pfe-theme--surface--border-width--heavy,4px) - 0px);height:calc(100% - 0px);background-color:transparent}li :hover::before,li:not([expand]) li:hover::before{background-color:#d2d2d2;background-color:var(--pfe-theme--color--ui-disabled,#d2d2d2)}li[active]::before,li[expand]::before{background-color:#06c;background-color:var(--pfe-jump-links--accent,var(--pfe-jump-links--BorderColor,var(--pfe-theme--color--ui-accent,#06c)));z-index:2}a{position:relative;color:#6a6e73;color:var(--pfe-theme--color--ui-disabled--text,#6a6e73);font-size:1rem;font-size:var(--pfe-jump-links--FontSize,var(--pf-global--FontSize--md,1rem));text-decoration:none;line-height:1.5;line-height:var(--pfe-theme--line-height,1.5);padding:calc(calc(1.5rem / 6) * 2) calc(calc(1.5rem / 3) * 2);padding:calc(var(--pfe-jump-links__link--vertical-spacer,calc(var(--pfe-theme--content-spacer,1.5rem)/ 6)) * 2) calc(var(--pfe-jump-links__link--horizontal-spacer,calc(var(--pfe-theme--content-spacer,1.5rem)/ 3)) * 2)}a,a:focus+ul>li>a,li:hover a,li[expand] a{display:table}li>a:hover,li[active]>a{color:#3c3f42;color:var(--pfe-broadcasted--text,#3c3f42)}:host([on=dark]) a{color:#d2d2d2;color:var(--pfe-theme--color--text--muted--on-dark,#d2d2d2)}:host([on=saturated]) a{color:#d2d2d2;color:var(--pfe-theme--color--text--muted--on-saturated,#d2d2d2)}.has-sub-section a{padding-bottom:calc(1.5rem / 6);padding-bottom:var(--pfe-jump-links__link--vertical-spacer,calc(var(--pfe-theme--content-spacer,1.5rem)/ 6))}.sub-section a{margin-left:calc(1rem * .75);margin-left:calc(var(--pfe-theme--container-spacer,1rem) * .75);font-size:calc(1rem * .85);font-size:calc(var(--pfe-jump-links--FontSize,var(--pf-global--FontSize--md,1rem)) * .85);padding:calc(1.5rem / 6) calc(calc(1.5rem / 3) * 2);padding:var(--pfe-jump-links__link--vertical-spacer,calc(var(--pfe-theme--content-spacer,1.5rem)/ 6)) calc(var(--pfe-jump-links__link--horizontal-spacer,calc(var(--pfe-theme--content-spacer,1.5rem)/ 3)) * 2)}@media (min-width:992px){.sub-section a{display:none}}.sub-section a:last-child{padding-bottom:calc(1.5rem / 3);padding-bottom:var(--pfe-jump-links__link--horizontal-spacer,calc(var(--pfe-theme--content-spacer,1.5rem)/ 3))}a:focus:focus-visible{outline:0;position:relative}a:focus:focus-visible::after{position:absolute;content:"";top:0;left:0;width:calc(100% + 3px);width:calc(100% + var(--pfe-theme--ui--border-width--active,3px));height:calc(100% + 3px);height:calc(100% + var(--pfe-theme--ui--border-width--active,3px));border-radius:2px;border-radius:var(--pfe-theme--ui--border-radius,2px);border:2px solid transparent;border:var(--pfe-theme--ui--border-width--md,2px) var(--pfe-theme--ui--border-style,solid) transparent}@media screen and (-ms-high-contrast:active),screen and (-ms-high-contrast:none){a:focus:focus-visible::after{height:100%}}a:focus:focus-visible:focus::after{border-color:#06c;border-color:var(--pfe-theme--color--link,#06c)}a:focus:focus-visible:focus:not(:focus-visible)::after{border:unset}ul ul{margin:0;padding:0;overflow-y:hidden;-webkit-transition:-webkit-box-flex 1s linear,-webkit-flex 1s linear;transition:-webkit-box-flex 1s linear,-webkit-flex 1s linear;transition:flex 1s linear;transition:flex 1s linear,-webkit-box-flex 1s linear,-webkit-flex 1s linear,-ms-flex 1s linear}ul ul,ul ul li{border-left:none!important}pfe-accordion{border:1px solid #d2d2d2;border:var(--pfe-theme--surface--border-width,1px) var(--pfe-theme--surface--border-style,solid) var(--pfe-theme--color--ui-disabled,#d2d2d2);--context:light;--pfe-accordion--BackgroundColor:var(--pfe-theme--color--surface--lightest, #fff)}:host([color=darkest]) pfe-accordion{--context:dark;--pfe-accordion--BackgroundColor:var(--pfe-theme--color--surface--darkest, #151515);--pfe-theme--color--ui-accent--on-dark:transparent}pfe-accordion,pfe-accordion-panel.animating,pfe-accordion-panel[expanded]{--pfe-accordion--accent:transparent;--pfe-accordion--BorderColor:transparent;--pfe-accordion--accent:transparent;--pfe-accordion--BorderTopWidth:0;--pfe-accordion--BorderBottomWidth:0;--pfe-accordion--panel-container--Padding:0 0 0 calc(var(--pfe-accordion__base--Padding,var(--pfe-theme--container-spacer,1rem)) * 1.5)}@media screen and (min-width:992px){:host([horizontal]){width:100%;background-color:#fff;background-color:var(--pfe-jump-links--BackgroundColor,var(--pfe-theme--color--surface--lightest,#fff));--context:var(--pfe-jump-links--context, var(--pfe-theme--color--surface--lightest--context, light));z-index:calc(80 + 1);z-index:calc(var(--pfe-theme--zindex--jumplinks,80) + 1);border:none;padding:0}:host([horizontal]) .pfe-jump-links-nav__heading{-webkit-flex-basis:100%;-ms-flex-preferred-size:100%;flex-basis:100%;-webkit-align-self:center;-ms-flex-item-align:center;-ms-grid-row-align:center;align-self:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;display:block;margin:0;padding-bottom:1rem;padding-bottom:var(--pfe-theme--container-padding,1rem);border-bottom:1px solid #d2d2d2;border-bottom:var(--pfe-theme--surface--border-width,1px) var(--pfe-theme--surface--border-style,solid) var(--pfe-theme--color--surface--border,#d2d2d2)}:host([horizontal]) .pfe-jump-links-nav__heading h3,:host([horizontal]) ::slotted([slot=heading]){text-align:center;text-align:var(--pfe-jump-links__heading--TextAlign,center)}:host([horizontal]) ::slotted([slot=logo]){position:absolute;max-height:calc(1rem * 3.5);max-height:calc(var(--pfe-theme--container-spacer,1rem) * 3.5);max-width:calc(1rem * 14);max-width:calc(var(--pfe-theme--container-spacer,1rem) * 14);top:1rem;top:var(--pfe-theme--container-spacer,1rem);left:calc(1rem * 4);left:calc(var(--pfe-theme--container-spacer,1rem) * 4)}:host([horizontal]) ::slotted([slot=cta]){position:absolute;top:calc(1rem * 1);top:calc(var(--pfe-theme--container-spacer,1rem) * 1);right:calc(1rem * 4);right:calc(var(--pfe-theme--container-spacer,1rem) * 4)}}@media screen and (min-width:992px){:host([horizontal]) nav{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-flow:row wrap;-ms-flex-flow:row wrap;flex-flow:row wrap;padding-top:32px;padding-bottom:8px;max-width:calc(992px - (var(--pfe-jump-links--Padding--horizontal) * 4));max-width:var(--pfe-jump-links--Width,calc(992px - (var(--pfe-jump-links--Padding--horizontal) * 4)))}}@media screen and (min-width:1200px){:host([horizontal]) nav{max-width:calc(1200px - (var(--pfe-jump-links--Padding--horizontal) * 4));max-width:var(--pfe-jump-links--Width,calc(1200px - (var(--pfe-jump-links--Padding--horizontal) * 4)))}}@media screen and (min-width:992px){:host([horizontal]) #container{padding:0;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;justify-items:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column}:host([horizontal]) ul{border:none;text-align:center;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:0;width:auto;margin:0 auto}:host([horizontal]) li{margin-left:0;padding:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;margin-top:calc(1px * -1);margin-top:calc(var(--pfe-theme--surface--border-width,1px) * -1)}:host([horizontal]) li::before{height:4px;height:var(--pfe-theme--surface--border-width--heavy,4px);width:100%}:host([horizontal]) a{padding:16px;text-decoration:none;font-size:16px;color:var(--pfe-broadcasted--text--muted,)}:host([horizontal]) a:hover,:host([horizontal]) a[active]{color:#3c3f42;color:var(--pfe-broadcasted--text,#3c3f42)}}:host([hidden]){display:none!important} /*# sourceMappingURL=pfe-jump-links-nav.min.css.map */</style>\n${this.isMobile?`\n<pfe-accordion>\n  <pfe-accordion-header>\n    <slot class="pfe-jump-links-nav__heading" name="heading">\n      <h3>${this.srText||"Jump to section"}</h3>\n    </slot>\n  </pfe-accordion-header>\n  <pfe-accordion-panel>\n`:""}\n\n<nav>\n  ${this.isMobile?"":`<slot class="pfe-jump-links-nav__heading" name="heading"${this.noHeader?" sr-only":""}>\n    <h3>${this.srText||"Jump to section"}</h3>\n  </slot>`}\n  ${this.horizontal?'<slot class="pfe-jump-links-nav__logo" name="logo"></slot>':""}\n  <div id="container"></div>\n  ${this.horizontal?'<slot class="pfe-jump-links-nav__cta" name="cta"></slot>':""}\n</nav>\n\n${this.isMobile?"\n  </pfe-accordion-panel>\n</pfe-accordion>\n":""}`}static get tag(){return"pfe-jump-links-nav"}get templateUrl(){return"pfe-jump-links-nav.html"}get styleUrl(){return"pfe-jump-links-nav.scss"}static get PfeType(){return e.PfeTypes.Content}static get events(){return{activeNavItem:"pfe-jump-links-panel:active-navItem",change:"pfe-jump-links-panel:change",stuck:"pfe-jump-links-nav:stuck",resize:"resize",scroll:"scroll",keyup:"keyup"}}get events(){return t.events}static get observer(){return{childList:!0,subtree:!0,characterData:!0}}static get properties(){return{autobuild:{title:"Autobuild",type:Boolean},horizontal:{title:"Horizontal",type:Boolean,default:!1},srText:{title:"Screen reader text",type:String,default:"Jump to section"},color:{title:"Color",type:String,default:"lightest",values:["lightest","darkest"]},offset:{title:"Offset",type:Number},mobileBreakpoint:{title:"Mobile breakpoint (max-width)",type:String},accordionCollapseTiming:{title:"Number of ms to wait before collapsing the accordion on click",type:Number,default:750},stuck:{title:"Stickiness state",type:Boolean,attr:"stuck",observer:"_stickyHandler"},noHeader:{title:"Opt-out of the header region",type:Boolean},oldAutobuild:{alias:"autobuild",attr:"pfe-c-autobuild"},oldHorizontal:{alias:"horizontal",attr:"pfe-c-horizontal"},oldColor:{alias:"color",attr:"pfe-color"}}}get isMobile(){if(this.mobileBreakpoint)return window.matchMedia(`(max-width: ${this.mobileBreakpoint})`).matches;const t=e.breakpoint.lg.match(/([0-9]+)([a-z]*)/);return t.length<1?"991px":window.matchMedia(`(max-width: ${parseInt(t[1],10)-1}${t[2]})`).matches}get header(){return this.getSlot(["heading","pfe-jump-links-nav--heading"])[0]}get cta(){return this.getSlot(["link","pfe-jump-links-nav--link"])[0]}get logo(){return this.getSlot(["logo","pfe-jump-links-nav--logo"])[0]}get container(){return this.shadowRoot.querySelector("#container")}set panel(e){e&&(this._panel=e,this._panel.hasAttribute("scrolltarget")||this._panel.setAttribute("scrolltarget",this.id),this.emitEvent(t.events.change))}get panel(){if(this._panel)return this._panel;if(this.id){const e=document.querySelector(`[scrolltarget="${this.id}"],[pfe-c-scrolltarget="${this.id}"]`);if(e)return e}let e=[];Promise.all([customElements.whenDefined("pfe-jump-links-panel")]).then(()=>{e=customElements.get("pfe-jump-links-panel").instances||[];const t=e.filter(e=>e.getAttribute("scrolltarget")===this.id);return 1===t.length?t[0]:1===e.length?(this.id=this.randomId,e[0].setAttribute("scrolltarget",this.id),e[0]):void(e.length>1?this.warn("Cannot locate which panel is connected to this navigation element."+(this.id?` Please add scrolltarget="${this.id}" to the appropriate panel.`:"")):this.warn("Cannot locate any panels on this page. Please see documentation for connecting the navigation and panel."))})}set sections(e){this._sections=e,this.emitEvent(t.events.change)}get sections(){if(this._sections)return this._sections;let e=this.panel;if(e||!this.autobuild){if(!this.autobuild){const t=[...this.querySelectorAll("ul > li > a[href]")].map(e=>`[id="${e.href.split("#").pop()}"]`);return e.querySelectorAll(t.join(","))||document.querySelectorAll(t.join(","))}return e.querySelectorAll(".pfe-jump-links-panel__section")||e.shadowRoot.querySelectorAll(".pfe-jump-links-panel__section")||e.querySelectorAll("[id]")}}get links(){return[...this.container.querySelectorAll("a")]}get items(){return[...this.shadowRoot.querySelectorAll(`.${this.tag}__item`)]}get offsetValue(){if(this.offset)return this.offset;let e=this.cssVariable("pfe-jump-links--offset")||this.cssVariable("pfe-jump-links-panel--offset");if(e&&(e=this._castPropertyValue({type:Number},parseInt(e,10)),e&&e>=0))return e;let t=0,i=this.cssVariable("pfe-navigation--Height--actual");if(i&&(i=this._castPropertyValue({type:Number},parseInt(i,10)),i&&i>0&&(t=i)),this.stuck&&(this.isMobile||this.horizontal))return t;let o=this.cssVariable("pfe-jump-links--Height--actual");return o&&(o=this._castPropertyValue({type:Number},parseInt(o,10)),o&&o>0&&(t+=o)),t}constructor(){super(t,{type:t.PfeType}),this.currentActive,this.isBuilding=!1,this.isVisible=!1,this.update=!1,this._panel,this._sections,this._clicked=!1,this.build=this.build.bind(this),this.rebuild=this.rebuild.bind(this),this.active=this.active.bind(this),this.inactive=this.inactive.bind(this),this.clearActive=this.clearActive.bind(this),this.getActive=this.getActive.bind(this),this.closeAccordion=this.closeAccordion.bind(this),this.scrollToSection=this.scrollToSection.bind(this),this.updateItem=this.updateItem.bind(this),this.updateLightDOM=this.updateLightDOM.bind(this),this._buildWrapper=this._buildWrapper.bind(this),this._buildItem=this._buildItem.bind(this),this._isValidLightDom=this._isValidLightDom.bind(this),this._reportHeight=this._reportHeight.bind(this),this._updateOffset=this._updateOffset.bind(this),this._checkVisible=this._checkVisible.bind(this),this._stickyHandler=this._stickyHandler.bind(this),this._clickHandler=this._clickHandler.bind(this),this._scrollHandler=this._scrollHandler.bind(this),this._resizeHandler=this._resizeHandler.bind(this),this._mutationHandler=this._mutationHandler.bind(this),this._panelChangedHandler=this._panelChangedHandler.bind(this),this._observer=new MutationObserver(this._mutationHandler)}connectedCallback(){if(super.connectedCallback(),this.isIE11)return void this.setAttribute("hidden","");this._attachListeners(t.events),!this.autobuild&&this._isValidLightDom()?this.updateLightDOM():this.autobuild&&this.build();const e=this.querySelector("ul, ol");if(e){this._toShadowDOM(e),this._updateOffset();const t=this._checkVisible(),i=this.getActive();t&&i>=0?this.active(i):t&&this.active(0)}else this.warn("Navigation could not be built.");this._observer.observe(this,t.observer)}disconnectedCallback(){super.disconnectedCallback(),this._dettachListeners(t.events)}build(e=this.sections){if(!e)return;let t;e=[...e],this.isBuilding=!0;let i=this._buildWrapper(),o=i,r=o;for(let a=0;a<e.length;a++){const n=e[a];let s=n.classList.contains("sub-section"),l=n.classList.contains("has-sub-section"),c=n.id;if(!c){let e=n.previousElementSibling;e&&e.classList.contains("pfe-jump-links__section--spacer")&&e.id?c=e.id:(n.id=this.randomId.replace("pfe-","pfe-jump-links--"),c=n.id)}t=this._buildItem({target:c,content:n.getAttribute("nav-label")||n.textContent,subsection:l},s),o.appendChild(t),l&&(r=o,o=this._buildWrapper("sub-nav"),t.appendChild(o)),e[a+1]&&!e[a+1].classList.contains("sub-section")&&(o=r||i)}this.isBuilding=!1,this.innerHTML="",this.appendChild(i)}closeAccordion(){if(!this.isMobile)return;const e=this.shadowRoot.querySelector("pfe-accordion");setTimeout(()=>{Promise.all([customElements.whenDefined("pfe-accordion")]).then(()=>{e.collapseAll()})},this.accordionCollapseTiming)}rebuild(){if(this.isBuilding)setTimeout(this.rebuild,10);else{let e;(this.isMobile&&!this.shadowRoot.querySelector("pfe-accordion")||!this.isMobile&&this.shadowRoot.querySelector("pfe-accordion"))&&this.render(),e=this.autobuild&&this.update?this.build():this.querySelector("ul"),e&&this.container.innerHTML!==e.outerHTML.toString()&&(this.container.innerHTML=e.outerHTML.toString()),this._updateOffset(),this.active(this.getActive()),this.items.forEach(e=>{e.querySelector("a").addEventListener("click",this._clickHandler)})}this.update=!1}active(e){let i,o=this.items;if(i="number"==typeof e?e:o.findIndex(t=>t===e),i<0||i>=o.length||!o[i])return;this.clearActive(),this.currentActive=i;const r=o[i].closest("li"),a=r.closest("ul").closest("li"),n=r.classList.contains("sub-section"),s=r.classList.contains("has-sub-section");r.setAttribute("active",""),s?r.setAttribute("expand",""):n&&a.setAttribute("expand",""),this.emitEvent(t.events.activeNavItem,{detail:{activeNavItem:i}})}getActive(){if(!this.sections)return;const e=[...this.sections],t=this.offsetValue,i=e.filter((i,o)=>{const r=window.innerHeight||document.documentElement.clientHeight,a=e[o+1],n=a?a.getBoundingClientRect().top:0,s=i.getBoundingClientRect().top;return s>=0&&s<=r&&(!a||n>=t&&t-s<n-t)});return i&&0!==i.length?e.indexOf(i[0]):void 0}inactive(e){let t,i=this.items;if(t="number"==typeof e?e:i.findIndex(t=>t===e),t<0||t>=i.length||!i[t])return;const o=i[t].closest("li"),r=o.closest("ul").closest("li"),a=o.classList.contains("sub-section"),n=o.classList.contains("has-sub-section");o.removeAttribute("active"),n?o.removeAttribute("expand"):a&&r.removeAttribute("expand")}clearActive(){this.items.forEach(e=>this.inactive(e))}_attachListeners(e){this.autobuild&&document.addEventListener(t.events.change,this._panelChangedHandler),window.addEventListener(e.resize,this._resizeHandler),window.addEventListener(e.scroll,this._scrollHandler),window.addEventListener(e.stuck,this._updateOffset)}_dettachListeners(e){this._observer.disconnect(),document.removeEventListener(e.change,this._panelChangedHandler),window.removeEventListener(e.resize,this._resizeHandler),window.removeEventListener(e.scroll,this._scrollHandler),window.removeEventListener(e.keyup,this._keyboardHandler),window.removeEventListener(e.stuck,this._updateOffset)}_buildItem(e,t=!1){let i=document.createElement("li");i.className=this.tag+"__item";let o=document.createElement("a");return o.className=this.tag+"__link",o.href="#"+e.target,o.setAttribute("data-target",e.target),o.innerHTML=e.content,e.subsection&&i.classList.add("has-sub-section"),t&&i.classList.add("sub-section"),i.appendChild(o),i}_buildWrapper(e="pfe-jump-links-nav"){let t=document.createElement("ul");return t.className=e,t}_siblingJumpLinks(e=(e=>e!==this)){return t.instances.filter(e)}_reportHeight(){let e=0;const t=this._siblingJumpLinks(e=>e.stuck&&(e.horizontal||e.isMobile));t.length>0&&(e=t[t.length-1].getBoundingClientRect().height);const i=this.cssVariable("pfe-jump-links--Height--actual",null,document.body);i&&parseInt(i,10)===e||this.cssVariable("pfe-jump-links--Height--actual",e+"px",document.body)}_isValidLightDom(){let e=!0;return this.hasLightDOM()&&(this.querySelector("ul")||this.querySelector("ol"))||this.autobuild||(this.warn("This component requires a list in the light DOM to .\nAlternatively, add the `autobuild` attribute to dynamically generate the list from the provided panel."),e=!1),this.logo&&!this.horizontal&&this.warn("The logo slot is NOT supported in vertical jump links."),this.cta&&!this.horizontal&&this.warn("The link slot is NOT supported in vertical jump links."),Number.isInteger(Number(this.customVar))&&this.warn("Using an integer with a unit is not supported for custom property --pfe-jump-links-panel--offset. The component strips the unit using parseInt(). For example so 1rem would become 1 and behave as if you had entered 1px. Values with a pixel unit will behave correctly."),e}updateItem(e,t=!1){e.classList=`${this.tag}__item${t?" sub-section":""}`;e.querySelector("a").classList=this.tag+"__link";const i=e.querySelector("ul");i&&(e.classList.add("has-sub-section"),i.querySelectorAll(":scope > li").forEach(e=>this.updateItem(e,!0)))}updateLightDOM(){const e=this.querySelector("ul");e.classList=this.tag,e.querySelectorAll(":scope > li").forEach(e=>this.updateItem(e))}_toShadowDOM(e){this.container.innerHTML!==e.outerHTML.toString()&&(this.container.innerHTML=e.outerHTML.toString()),this.links.forEach(e=>{e.addEventListener("click",this._clickHandler)})}_checkVisible(){return this.isVisible=this.getBoundingClientRect().top<=document.documentElement.clientHeight&&this.getBoundingClientRect().right>=0&&this.getBoundingClientRect().bottom>=0&&this.getBoundingClientRect().left<=document.documentElement.clientWidth,this.isVisible}_updateOffset(){this._reportHeight(),this.horizontal?this.style.top=this.offsetValue+"px":this.style.top=this.offsetValue+20+"px"}_clickHandler(e){const t=e.target,i=t.closest(`.${this.tag}__item`);if(this.active(i),!this.sections)return;const o=[...this.sections].findIndex(e=>e.id===t.hash.replace("#",""));o<0||(e.preventDefault(),this._clicked=!0,history.replaceState({},"",t.href),this.scrollToSection(o))}scrollToSection(e){const t=this.sections[e],i=this.offsetValue;this.stuck=!(this.getBoundingClientRect().top!==i);let o=window.pageYOffset+t.getBoundingClientRect().top;if(!t.classList.contains("pfe-jump-links__section--spacer")){o-=i;let e=0;if(this.horizontal&&(e=this.getBoundingClientRect().height),this.isMobile){e=this.shadowRoot.querySelector("pfe-accordion-header").getBoundingClientRect().height-this.getBoundingClientRect().height}e>0&&(o-=e)}let r=20;if(t.hasAttribute("offset")){const e=this._castPropertyValue({type:Number},parseInt(t.getAttribute("offset"),10));e&&(r=e)}else this.panel&&this.panel.offset&&(r=this.panel.offset);o-=r,o<0&&(o=0),window.scroll({top:o,behavior:"smooth"}),this.closeAccordion(),this.stuck=!(this.getBoundingClientRect().top!==i),setTimeout(()=>{t.focus(),this._clicked=!1},1e3)}_stickyHandler(e,i){e!==i&&(this._reportHeight(),this.emitEvent(t.events.stuck,{detail:{stuck:i}}))}_scrollHandler(){this._clicked||(clearTimeout(this._scrollHandler._tId),this._scrollHandler._tId=setTimeout(()=>{if(this._checkVisible(),!this.isVisible)return;this.stuck=!(this.getBoundingClientRect().top!==this.offsetValue);const e=this.getActive();e>=0&&e!==this.currentActive&&(this.currentActive=e,this.active(e))},10))}_resizeHandler(){this.rebuild()}_mutationHandler(){this.autobuild||(this.update=!0,this.rebuild())}_panelChangedHandler(){this.autobuild&&(this.update=!0,this._sections=null,this.rebuild())}}
/*!
 * PatternFly Elements: PfeJumpLinks 1.12.3
 * @license
 * Copyright 2021 Red Hat, Inc.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
*/class i extends e{static get version(){return"1.12.3"}static get tag(){return"pfe-jump-links-panel"}get html(){return"<slot></slot>"}static get events(){return{change:this.tag+":change"}}static get observer(){return{childList:!0,subtree:!0}}static get PfeType(){return e.PfeTypes.Content}static get properties(){return{offset:{title:"Offset",type:Number},scrolltarget:{title:"Scroll target",type:String},spacers:{title:"Inject spacers",type:Boolean,default:!1,observer:"_makeSpacers"},oldOffset:{alias:"offset",attr:"pfe-c-offset"},oldScrolltarget:{alias:"scrolltarget",attr:"pfe-c-scrolltarget"}}}get sections(){return this.querySelectorAll(`.${this.tag}__section`)}constructor(){super(i,{type:i.PfeType}),this._init=this._init.bind(this),this._makeSpacers=this._makeSpacers.bind(this),this._isValidMarkup=this._isValidMarkup.bind(this),this._observer=new MutationObserver(()=>{this._init(),this.emitEvent(i.events.change,{})})}connectedCallback(){super.connectedCallback(),this._init()}disconnectedCallback(){super.disconnectedCallback(),this._observer.disconnect()}_isValidMarkup(){0===[...this.sections].length&&this.warn(`This panel does not contain any headings labeled with the ${this.tag}__section class. Please add that class and an ID to any heading you would like surfaced in the jump links navigation.`)}_makeSpacers(){this.spacers&&(!this.sections||[...this.sections].length<=0||(this._observer.disconnect(),[...this.sections].forEach(e=>{const t=e.parentNode;let i=e.previousElementSibling;i&&i.classList.contains("pfe-jump-links__section--spacer")||(i=document.createElement("div"),i.classList.add("pfe-jump-links__section--spacer"),t.insertBefore(i,e)),!e.id||i.id&&i.id===e.id||(i.id=e.id,e.removeAttribute("id"),e.setAttribute("data-target",i.id)),i.style.marginTop="calc(-1 * (var(--pfe-navigation--Height--actual, 0px) + var(--pfe-jump-links--Height--actual, 0px)))",i.style.height="calc(var(--pfe-navigation--Height--actual, 0px) + var(--pfe-jump-links--Height--actual, 0px))"}),this._observer.observe(this,i.observer)))}_init(){this._isValidMarkup(),this._makeSpacers()}}
/*!
 * PatternFly Elements: PfeJumpLinks 1.12.3
 * @license
 * Copyright 2021 Red Hat, Inc.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
*/e.create(t),e.create(i);var o={PfeJumpLinksNav:t,PfeJumpLinksPanel:i};export default o;
//# sourceMappingURL=pfe-jump-links.min.js.map
