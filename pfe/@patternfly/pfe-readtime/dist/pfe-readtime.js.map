{"version":3,"file":"pfe-readtime.js","sources":["../_temp/pfe-readtime.js"],"sourcesContent":["/*!\n * PatternFly Elements: PfeReadtime 1.12.3\n * @license\n * Copyright 2021 Red Hat, Inc.\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * \n*/\n\nimport PFElement from \"../../pfelement/dist/pfelement.js\";\n\nfunction getEstimatedWPM(language) {\n  switch (language) {\n    case \"en\": // 228 wpm\n    case \"ko\": // for Korean, we were able to locate 7 studies in five articles: 5 with silent reading and 2 with reading aloud. Silent reading rate was 226 wpm, reading aloud 133 wpm.\n      return 228;\n    case \"zh\": // 158 wpm\n      return 158;\n    case \"fr\": // 195 wpm\n      return 195;\n    case \"ja\": // 193 wpm\n      return 193;\n    case \"de\":\n      return 179;\n    case \"it\": // 188 wpm\n      return 188;\n    case \"pt-br\": // 181 wpm\n      return 181;\n    case \"es\":\n      return 218;\n    default:\n      return 228;\n  }\n}\n\nclass PfeReadtime extends PFElement {\n\n  // Injected at build-time\n  static get version() {\n    return \"1.12.3\";\n  }\n\n  // Injected at build-time\n  get html() {\n    return `\n<style>:host{font-size:1rem;font-size:var(--pfe-readtime--FontSize,var(--pf-global--FontSize--md,1rem))}:host([hidden]){display:none} /*# sourceMappingURL=pfe-readtime.min.css.map */</style>\n<span class=\"pfe-readtime__text\">${this.readString}</span>`;\n  }\n\n  static get tag() {\n    return \"pfe-readtime\";\n  }\n\n  static get meta() {\n    return {\n      title: \"Readtime\",\n      description:\n        \"This element will collect a word count on a given section and calculate the readtime based on that count.\",\n    };\n  }\n\n  get templateUrl() {\n    return \"pfe-readtime.html\";\n  }\n\n  get styleUrl() {\n    return \"pfe-readtime.scss\";\n  }\n\n  // Declare the type of this component\n  static get PfeType() {\n    return PFElement.PfeTypes.Content;\n  }\n\n  static get properties() {\n    return {\n      wpm: {\n        title: \"Words per minute\",\n        type: Number,\n        default: (el) => getEstimatedWPM(el._lang),\n        observer: `render`,\n      },\n      wordCount: {\n        title: \"Number of words in the content\",\n        type: Number,\n        default: 0,\n        observer: `render`,\n      },\n      templateString: {\n        title: \"Template for printing the readtime\",\n        description:\n          \"Translatable string for printing out the readtime in a readable format. Use %t as a stand-in for the calculated value.\",\n        attr: \"template\",\n        type: String,\n        default: (el) => el.textContent.trim() || \"%t-minute readtime\",\n        observer: `render`,\n      },\n      _lang: {\n        title: \"Language of content\",\n        type: String,\n        attr: \"lang\",\n        enum: [\"en\", \"ko\", \"zh\", \"fr\", \"ja\", \"de\", \"it\", \"pt-br\", \"es\"],\n        default: () => document.documentElement.lang || \"en\",\n        observer: `_langChangedHandler`,\n      },\n      for: {\n        title: \"Element containing content\",\n        //This is the unique selector of the target\n        type: String,\n        observer: \"_forChangeHandler\",\n      },\n    };\n  }\n\n  get readtime() {\n    return Math.floor(this.wordCount / this.wpm) || 0;\n  }\n\n  get readString() {\n    if (this.readtime <= 0) {\n      this.setAttribute(\"hidden\", \"\");\n      return;\n    }\n\n    this.removeAttribute(\"hidden\");\n\n    if (this.templateString && this.templateString.match(/%t/)) {\n      return this.templateString.replace(\"%t\", this.readtime);\n    } else {\n      return `${this.readtime}${this.templateString}`;\n    }\n  }\n\n  constructor() {\n    // Note: Delay render is important here for the timing of variable definitions\n    // we want to render after all the inputs have been read in and parsed\n    super(PfeReadtime, { type: PfeReadtime.PfeType, delayRender: true });\n\n    this._forChangeHandler = this._forChangeHandler.bind(this);\n    this._langChangedHandler = this._langChangedHandler.bind(this);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    this.render();\n  }\n\n  // disconnectedCallback() {}\n\n  _forChangeHandler(oldVal, newVal) {\n    if (newVal === oldVal) return;\n\n    const target = document.querySelector(newVal) || document.querySelector(`#${newVal}`);\n    if (target) {\n      this.content = target;\n\n      if (target.hasAttribute(\"word-count\")) {\n        const wcAttr = target.getAttribute(\"word-count\");\n        if (Number(wcAttr) >= 0) {\n          this.wordCount = Number(wcAttr);\n        }\n      } else if (target.textContent.trim()) {\n        this.wordCount = target.textContent.split(/\\b\\w+\\b/).length;\n      }\n\n      // If a new target element is identified, re-render\n      this.render();\n    }\n  }\n\n  _langChangedHandler(oldVal, newVal) {\n    if (newVal === oldVal) return;\n\n    this.wpm = getEstimatedWPM(newVal);\n    this.render();\n  }\n}\n\nPFElement.create(PfeReadtime);\n\nexport default PfeReadtime;\n"],"names":[],"mappings":"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"}